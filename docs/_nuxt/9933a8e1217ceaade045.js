(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{193:function(t,e,n){var o=n(7);o(o.P,"Array",{fill:n(197)}),n(79)("fill")},194:function(t,e,n){var content=n(199);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(17).default)("a9282396",content,!0,{sourceMap:!1})},195:function(t,e,n){var content=n(201);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(17).default)("77f0a432",content,!0,{sourceMap:!1})},197:function(t,e,n){"use strict";var o=n(32),r=n(115),l=n(26);t.exports=function(t){for(var e=o(this),n=l(e.length),c=arguments.length,h=r(c>1?arguments[1]:void 0,n),d=c>2?arguments[2]:void 0,f=void 0===d?n:r(d,n);f>h;)e[h++]=t;return e}},198:function(t,e,n){"use strict";var o=n(194);n.n(o).a},199:function(t,e,n){(t.exports=n(16)(!1)).push([t.i,".modal[data-v-cacbaa74]{position:absolute;top:0;left:0;height:100%;width:100%;background:#fff}",""])},200:function(t,e,n){"use strict";var o=n(195);n.n(o).a},201:function(t,e,n){(t.exports=n(16)(!1)).push([t.i,".modal[data-v-d22d48e6]{position:absolute;top:0;left:0;height:100%;width:100%;background:rgba(51,51,51,.66667)}.modal-content[data-v-d22d48e6]{position:relative;top:-20%;background:#fff}",""])},204:function(t,e,n){"use strict";n.r(e);n(62);var o={37:"arrowLeft",38:"arrowUp",39:"arrowRight",40:"arrowDown",65:"a",87:"w",68:"d",83:"s",80:"p",82:"r"},r={inject:["breakpoint"],data:function(){return{ctx:null,keyboard:{arrowLeft:!1,arrowUp:!1,arrowRight:!1,arrowDown:!1,a:!1,w:!1,d:!1,s:!1,p:!1,r:!1}}},mounted:function(){this.ctx=this.$refs.gameCanvas.getContext("2d"),document.addEventListener("keydown",this.onKeydown),document.addEventListener("keyup",this.onKeyup)},beforeDestroy:function(){document.removeEventListener("keydown",this.onKeydown),document.removeEventListener("keyup",this.onKeyup)},computed:{dimensions:function(){var t={width:0,height:0,nCols:0,nRows:0};return this.breakpoint.isMobile?(t.width=288,t.height=360,t.nCols=32,t.nRows=40):this.breakpoint.isTablet?(t.width=720,t.height=480,t.nCols=60,t.nRows=40):(t.width=900,t.height=600,t.nCols=60,t.nRows=40),t},snakeOptions:function(){var t={col:0,row:0};return this.breakpoint.isMobile?(t.col=14,t.row=9):this.breakpoint.isTablet?(t.col=20,t.row=13):(t.col=29,t.row=19),t}},methods:{onKeydown:function(t){this.keyboard[o[t.keyCode]]=!0},onKeyup:function(t){this.keyboard[o[t.keyCode]]=!1},onMobileControlDown:function(t){"left"===t?this.controls.arrowLeft=!0:"up"===t?this.controls.arrowUp=!0:"right"===t?this.controls.arrowRight=!0:"down"===t&&(this.controls.arrowDown=!0)},onMobileControlUp:function(t){"left"===t?this.controls.arrowLeft=!1:"up"===t?this.controls.arrowUp=!1:"right"===t?this.controls.arrowRight=!1:"down"===t&&(this.controls.arrowDown=!1)}}},l=n(2),c=Object(l.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("canvas",{ref:"gameCanvas",attrs:{height:t.dimensions.height,width:t.dimensions.width}}),t._v(" "),t.ctx?t._t("default",null,null,{ctx:t.ctx,keyboard:t.keyboard,dimensions:t.dimensions}):t._e()],2)}),[],!1,null,null,null).exports;n(78),n(193);function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function d(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function f(t,e,n){return e&&d(t.prototype,e),n&&d(t,n),t}var m=n(15);function v(t,e){return!e||"object"!==Object(m.a)(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function w(t){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function y(t,p){return(y=Object.setPrototypeOf||function(t,p){return t.__proto__=p,t})(t,p)}function k(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&y(t,e)}var x=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;h(this,t),this.listeners={},this.animationFrameHandle=null,this.cachedRunCallback=null,this._running=!1,this.animationRate=e}return f(t,[{key:"stop",value:function(){this._running=!1,cancelAnimationFrame(this.animationFrameHandle)}},{key:"resume",value:function(){return!(this._running||!this.cachedRunCallback)&&(this.run(this.cachedRunCallback),!0)}},{key:"run",value:function(t){var e,n=this;if(this._running=!0,this.cachedRunCallback||(this.cachedRunCallback=t.bind(this)),this.animationRate){var o=this.animationRate;e=function(){0===(o-=1)&&(t(),o=n.animationRate),n.animationFrameHandle=requestAnimationFrame(e)}}else e=function(){t(),n.animationFrameHandle=requestAnimationFrame(e)};e()}}]),t}(),S=function(){function t(e){var n=e.x,o=e.y,r=e.width,l=e.height;h(this,t),this.kind=1,this.x=n,this.y=o,this.width=r,this.height=l}return f(t,[{key:"color",get:function(){switch(this.kind){case 1:return"#abcd";case 2:return{strokeStyle:"lime",fillStyle:"#a29"};case 3:return{fillStyle:"#17b",strokeStyle:"#333"};case 4:return{fillStyle:"#abcd",strokeStyle:"#789f"};case 5:return{fillStyle:"#f11",strokeStyle:"#fa5"}}}}]),t}();var C=function(){function t(e){var n=e.nRows,o=e.nCols,r=e.width,l=e.height;h(this,t),this.cells=function(t,e,n,o){for(var r=[],l=Math.floor(n/e),c=Math.floor(o/t),h=0;h<t;h++)for(var d=c*h,col=0;col<e;col++)r.push(new S({x:l*col,y:d,width:l,height:c}));return r}(n,o,r,l)}return f(t,[{key:"getCell",value:function(t){return this.cells[t]}}]),t}(),_=function(){function t(e){h(this,t),this.ctx=e}return f(t,[{key:"clearCanvas",value:function(){this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height)}},{key:"paintCell",value:function(t){this.ctx.beginPath(),this.ctx.rect(t.x,t.y,t.width,t.height),"string"==typeof t.color?(this.ctx.fillStyle=t.color,this.ctx.fill()):(this.ctx.fillStyle=t.color.fillStyle,this.ctx.strokeStyle=t.color.strokeStyle,this.ctx.stroke(),this.ctx.fill()),this.ctx.closePath()}},{key:"paintText",value:function(t){var text=t.text,e=t.font,n=t.fillStyle,o=t.x,r=t.y;this.ctx.fillStyle=n,this.ctx.font=e,this.ctx.fillText(text,o,r)}}]),t}(),P=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.initPosition,o=e.gameMode;h(this,t),this.changeDirectionLock=!1,this.nSegmentsToPush=0,this.dx=1,this.dy=0,this.prevHeadPosition=null,this.didCollideWithSelf=!1,this.gameMode=o,this.headPosition=n,this.body=[n],this.bodyMap={},this.bodyMap[n]=!0,this.history={},this.history[n]=!0}return f(t,[{key:"isSnake",value:function(t){return this.bodyMap[t]}},{key:"setDirection",value:function(t){var e=this,n=function(t,n){e.dx!==-t&&(e.dx=t),e.dy!==-n&&(e.dy=n),e.changeDirectionLock=!0},o={arrowLeft:function(){return n(-1,0)},arrowUp:function(){return n(0,-1)},arrowRight:function(){return n(1,0)},arrowDown:function(){return n(0,1)}};!this.changeDirectionLock&&o[t]&&o[t]()}},{key:"updateBody",value:function(t){var e=this;if(this.bodyMap={},this.history[this.headPosition]=!0,this.nSegmentsToPush>0)this.body.push(null),this.nSegmentsToPush-=1;else if("classic"===this.gameMode)for(var i=0;i<this.body.length-1;i++){var n=this.body[i+1];this.body[i]=n}this.prevHeadPosition=this.headPosition,this.headPosition+=this.dx,this.headPosition+=this.dy*t,this.body[this.body.length-1]=this.headPosition,this.body.forEach((function(t){e.bodyMap[t]&&(e.didCollideWithSelf=!0),e.bodyMap[t]=!0})),this.changeDirectionLock=!1}}]),t}();var O,M=function(t){function e(){var t,n;h(this,e);for(var o=arguments.length,r=new Array(o),l=0;l<o;l++)r[l]=arguments[l];return(n=v(this,(t=w(e)).call.apply(t,[this].concat(r)))).score=0,n.food=null,n.width=0,n.height=0,n.nRows=null,n.nCols=null,n.snake=null,n.cellMap=null,n.painter=null,n}return k(e,t),f(e,[{key:"setup",value:function(t){var e=t.ctx,n=t.animationRate,o=t.dimensions,r=t.initPosition,l=t.gameMode,c=t.paintScore;this.score=0,this.width=o.width,this.height=o.height,this.nRows=o.nRows,this.nCols=o.nCols,this.cellMap=new C(o),this.painter=new _(e),this.snake=new P({initPosition:r,gameMode:l}),this.animationRate=n,this.generateFood(),this.paintCells(),c&&this.paintScore()}},{key:"resize",value:function(t,e,n,o){this.width=t,this.height=e,this.nRows=n,this.nCols=o,this.cellMap=new C({nRows:n,nCols:o,width:t,height:e}),this.paintCells()}},{key:"getCellKind",value:function(i){return this.snake.bodyMap[i]?2:this.food===i?3:(this.snake.history[i],1)}},{key:"paintCells",value:function(){var t=this;this.painter.clearCanvas(),this.cellMap.cells.forEach((function(e,i){e.kind=t.getCellKind(i),t.painter.paintCell(e)}))}},{key:"generateFood",value:function(){var t,e,n=(t=0,e=this.nCols*this.nRows-1,Math.floor(Math.random()*(e-t)+t));if(this.snake.bodyMap[n])return this.generateFood();this.food=n}},{key:"snakeDidEatFood",value:function(){return this.snake.headPosition===this.food}},{key:"gameIsOver",value:function(){return this.snake.headPosition<0||this.snake.headPosition>this.nCols*this.nRows||this.snake.dx>0&&this.snake.headPosition%this.nCols==0||this.snake.dx<0&&this.snake.prevHeadPosition%this.nCols==0||this.snake.didCollideWithSelf}},{key:"paintScore",value:function(){this.painter.paintText({text:this.score,fillStyle:"black",font:"20px Arial",x:this.width-25,y:30})}},{key:"paintGameOver",value:function(){if(this.snake.didCollideWithSelf){var head=this.cellMap.getCell(this.snake.headPosition);head.kind=5,this.painter.paintCell(head)}!function(t,e){var n=e.width,o=e.height,r=e.x,l=e.y,c={x:r+.2*n,y:l+.2*o},h={x:r+.6*n,y:l+.2*o};t.beginPath(),t.fillStyle="limegreen",t.fillRect(c.x,c.y,3,3),t.fillRect(h.x,h.y,3,3);var d={startX:c.x-1,startY:l+.8*o,cpx:r+n/2,cpy:l+.4*o,endX:h.x+4,endY:l+.8*o};t.moveTo(d.startX,d.startY),t.quadraticCurveTo(d.cpx,d.cpy,d.endX,d.endY),t.fill(),t.closePath()}(this.painter.ctx,this.cellMap.getCell(this.snake.prevHeadPosition)),this.painter.paintText({text:"GAME OVER ! ! !",fillStyle:"red",font:"25px Arial",x:this.width/2-80,y:60})}}]),e}(x);var R,j={inject:["breakpoint"],props:{ctx:Function,dimensions:Object,controls:Object,gameMode:String,showScore:Boolean,animationRate:Number,gameOn:Boolean,gameOver:Boolean,score:Number},watch:{gameOn:function(t){var e=this;t?O.cachedRunCallback?O.resume():O.run((function(){if(O.snake.updateBody(O.nCols),O.gameIsOver())return O.stop(),O.paintGameOver(),e.update("gameOn",!1),void e.update("gameOver",!0);O.snakeDidEatFood()&&(e.update("score",e.score+1),O.score+=1,O.generateFood(),O.snake.nSegmentsToPush+=6),O.paintCells(),e.showScore&&O.paintScore()})):O.stop()},showScore:function(t){t?O.paintScore():O.paintCells()},controls:{deep:!0,handler:function(t){var e=t.arrowLeft,n=t.arrowUp,o=t.arrowRight,r=t.arrowDown,p=t.p,l=t.r;p&&(O.stop(),this.update("gameOn",!1)),l&&(this.gameOver?this.$emit("reset"):(O.resume(),this.update("gameOn",!0))),e&&O.snake.setDirection("arrowLeft"),n&&O.snake.setDirection("arrowUp"),o&&O.snake.setDirection("arrowRight"),r&&O.snake.setDirection("arrowDown")}},animationRate:function(t){O.animationRate=t},gameMode:function(t){O.snake.gameMode=t},dimensions:{deep:!0,handler:function(t,e){t.width===e.width&&t.height===e.height||O.resize(t.width,t.height,t.nRows,t.nCols)}}},computed:{initPosition:function(){return this.breakpoint.isMobile?126:this.breakpoint.isTablet?260:551}},mounted:function(){O=new M,this.setup()},methods:{update:function(t,e){this.$emit("update:".concat(t),e)},setup:function(){O.setup({ctx:this.ctx(),dimensions:this.dimensions,initPosition:this.initPosition,animationRate:this.animationRate,gameMode:this.gameMode,paintScore:this.showScore})}},render:function(t){console.log("hey we reneder")}},D=Object(l.a)(j,void 0,void 0,!1,null,null,null).exports,L={props:{value:Boolean,gameMode:String,snakeSpeed:Object,showScore:Boolean}},$=(n(198),Object(l.a)(L,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.value?n("section",{staticClass:"modal"},[n("j-container",{staticClass:"flex fullheight"},[n("j-row",[n("j-col",{staticClass:"d-flex flex-column align-start"},[n("j-checkbox",{attrs:{id:"show-score-checkbox-mobile",label:"Show Score",value:t.showScore},on:{change:function(e){return t.$emit("update:showScore",e)}}}),t._v(" "),n("j-slider",{ref:"slider",attrs:{id:"speed-slider-mobile",label:"Speed: "+t.snakeSpeed.value,step:"1",tickmarks:"",min:t.snakeSpeed.min,max:t.snakeSpeed.max,value:t.snakeSpeed.value},on:{input:function(e){return t.$emit("update:snakeSpeed",e)}}}),t._v(" "),n("j-select",{attrs:{blur:"",label:"Game Mode",options:["classic","polluter"],value:t.gameMode},on:{input:function(e){return t.$emit("update:gameMode",e)}},scopedSlots:t._u([{key:"option",fn:function(e){var n=e.value;return[t._v("\n            "+t._s(n[0].toUpperCase()+n.slice(1))+"\n          ")]}}],null,!1,2234790531)})],1)],1),t._v(" "),n("j-row",[n("j-col")],1),t._v(" "),n("j-row",{staticClass:"align-end"},[n("j-col",[n("button",{staticClass:"btn primary block",on:{touchstart:function(e){return t.$listeners.input(!t.value)}}},[t._v("Close")])])],1)],1)],1):t._e()}),[],!1,null,"cacbaa74",null).exports),E={inject:["breakpoint"],props:{controls:Object},components:{GameWrap:c,Snake:D,MobileSettings:$},data:function(){return{showSettings:!1,snakeSpeed:{value:4,min:1,max:7},gameState:{gameOn:!1,gameOver:!1,score:0},gameMode:"classic",showScore:!1}},mounted:function(){this.breakpoint.isMobile&&(this.snakeSpeed.value=2),this.loadSettings(),window.addEventListener("beforeunload",this.saveSettings)},beforeDestroy:function(){window.removeEventListener("beforeunload",this.saveSettings)},computed:{animationRate:function(){switch(this.snakeSpeed.value){case 1:return 8;case 2:return 7;case 3:return 6;case 4:return 5;case 5:return 4;case 6:return 3;case 7:return 2}},gameStateControlText:function(){return this.gameState.gameOn?"Pause":this.gameState.gameOver?"Reset":"Start"},gameStateClass:function(){return this.gameState.gameOn?"primary":this.gameState.gameOver?"error":"success"}},methods:{loadSettings:function(){var t=localStorage.getItem("snake");t&&(t=JSON.parse(t),this.showScore=t.showScore,this.gameMode=t.gameMode,this.snakeSpeed.value=t.snakeSpeed.value)},saveSettings:function(){localStorage.setItem("snake",JSON.stringify({showScore:this.showScore,gameMode:this.gameMode,snakeSpeed:this.snakeSpeed}))},reset:function(){this.$refs.snake.setup(),this.gameState.gameOn=!1,this.gameState.gameOver=!1,this.gameState.score=0},onGameStateControlClick:function(){this.gameState.gameOver?this.reset():this.gameState.gameOn=!this.gameState.gameOn},onShowTouchSettings:function(){this.showSettings=!0,this.gameState.gameOn=!1}}},U=Object(l.a)(E,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("j-row",{staticClass:"justify-center"},[n("j-col",{staticClass:"d-flex flex-column align-center"},[n("section",{staticClass:"toolbar dense flat hidden-mobile"},[n("div",{staticClass:"toolbar-actions"},[n("j-col",{staticClass:"px-0"},[n("button",{staticClass:"btn small",class:t.gameStateClass,on:{click:t.onGameStateControlClick}},[t._v("\n            "+t._s(t.gameStateControlText)+"\n          ")]),t._v(" "),n("span",{staticClass:"ml-1"},[t._v('\n            "P" = pause, "R" = start/reset\n          ')])]),t._v(" "),n("j-col",{staticClass:"d-flex justify-end align-center px-0"},[n("div",{staticClass:"px-2"},[n("j-checkbox",{attrs:{id:"show-score-checkbox",label:"Show Score"},model:{value:t.showScore,callback:function(e){t.showScore=e},expression:"showScore"}})],1),t._v(" "),n("div",{staticClass:"px-2"},[n("j-slider",{ref:"slider",attrs:{blur:"",id:"speed-slider",label:"Speed: "+t.snakeSpeed.value,step:"1",tickmarks:"",min:t.snakeSpeed.min,max:t.snakeSpeed.max},model:{value:t.snakeSpeed.value,callback:function(e){t.$set(t.snakeSpeed,"value",e)},expression:"snakeSpeed.value"}})],1),t._v(" "),n("div",{staticClass:"pl-2"},[n("j-select",{attrs:{blur:"",label:"Game Mode",options:["classic","polluter"]},scopedSlots:t._u([{key:"option",fn:function(e){var n=e.value;return[t._v("\n                "+t._s(n[0].toUpperCase()+n.slice(1))+"\n              ")]}}]),model:{value:t.gameMode,callback:function(e){t.gameMode=e},expression:"gameMode"}})],1)])],1)]),t._v(" "),n("game-wrap",{scopedSlots:t._u([{key:"default",fn:function(e){var o=e.ctx,r=e.dimensions,l=e.keyboard;return[n("Snake",t._b({ref:"snake",attrs:{ctx:function(){return o},dimensions:r,controls:l,gameMode:t.gameMode,showScore:t.showScore,animationRate:t.animationRate},on:{reset:t.reset}},"Snake",t.gameState,!1,!0))]}}])}),t._v(" "),n("div",{staticClass:"hidden-above-mobile",attrs:{id:"mobile-controls"}},[n("div",{staticClass:"d-flex justify-between"},[n("div",{staticClass:"shrink d-flex flex-column"},[n("button",{staticClass:"btn small mb-4",class:t.gameStateClass,on:{touchstart:t.onGameStateControlClick}},[t._v("\n            "+t._s(t.gameStateControlText)+"\n          ")]),t._v(" "),n("button",{staticClass:"btn small",on:{touchstart:function(e){t.showSettings=!0,t.gameState.gameOn=!1}}},[t._v("\n            Settings\n          ")])]),t._v(" "),n("j-col",[n("j-row",[n("j-col",{staticClass:"d-flex flex-column align-center"},[n("button",{staticClass:"btn large square",on:{touchstart:function(e){return t.$emit("mobileControlDown","up")},touchend:function(e){return t.$emit("mobileControlUp","up")}}},[t._v("\n                ↑\n              ")])])],1),t._v(" "),n("j-row",[n("j-col",[n("button",{staticClass:"btn large square",on:{touchstart:function(e){return t.$emit("mobileControlDown","left")},touchend:function(e){return t.$emit("mobileControlUp","left")}}},[t._v("\n                ←\n              ")]),t._v(" "),n("button",{staticClass:"btn large square",on:{touchstart:function(e){return t.$emit("mobileControlDown","down")},touchend:function(e){return t.$emit("mobileControlUp","down")}}},[t._v("\n                ↓\n              ")]),t._v(" "),n("button",{staticClass:"btn large square",on:{touchstart:function(e){return t.$emit("mobileControlDown","right")},touchend:function(e){return t.$emit("mobileControlUp","right")}}},[t._v("\n                →\n              ")])])],1)],1)],1)]),t._v(" "),n("MobileSettings",{attrs:{gameMode:t.gameMode,showScore:t.showScore,snakeSpeed:t.snakeSpeed},on:{"update:gameMode":function(e){t.gameMode=e},"update:game-mode":function(e){t.gameMode=e},"update:showScore":function(e){t.showScore=e},"update:show-score":function(e){t.showScore=e},"update:snakeSpeed":function(e){t.snakeSpeed.value=e}},model:{value:t.showSettings,callback:function(e){t.showSettings=e},expression:"showSettings"}})],1)],1)}),[],!1,null,null,null).exports,T={data:function(){return{ctxProvider:{ctx:null}}},inject:["breakpoint"],provide:function(){return{ctxProvider:this.ctxProvider}},mounted:function(){this.ctxProvider.ctx=this.$refs.gameCanvas.getContext("2d")},computed:{hasCtx:function(){return!!this.ctxProvider.ctx},dimensions:function(){var t={width:0,height:0,nCols:0,nRows:0};return this.breakpoint.isMobile?(t.width=288,t.height=360,t.nCols=32,t.nRows=40):this.breakpoint.isTablet?(t.width=720,t.height=480,t.nCols=60,t.nRows=40):(t.width=900,t.height=600,t.nCols=60,t.nRows=40),t},snakeOptions:function(){var t={col:0,row:0};return this.breakpoint.isMobile?(t.col=14,t.row=9):this.breakpoint.isTablet?(t.col=20,t.row=13):(t.col=29,t.row=19),t}}},B=Object(l.a)(T,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("canvas",{ref:"gameCanvas",attrs:{height:this.dimensions.height,width:this.dimensions.width}}),this._v(" "),this._t("default",null,null,{hasCtx:this.hasCtx,dimensions:this.dimensions,snakeOptions:this.snakeOptions})],2)}),[],!1,null,null,null).exports,F=function(){function t(){h(this,t),this.fillStyle="#17b",this.strokeStyle="#333",this.x=0,this.y=0,this.r=0,this.dx=0,this.dy=0}return f(t,[{key:"updatePosition",value:function(){this.x+=this.dx,this.y+=this.dy}}]),t}(),G=function(){function t(){h(this,t),this.fillStyle="#a29",this.strokeStyle="lime",this.x=0,this.y=0,this.width=0,this.height=0,this.dx=0,this.dy=0,this.isLeft=!1}return f(t,[{key:"updatePosition",value:function(){this.y+=this.dy}}]),t}(),K=function(){function t(e){var n=e.ctx,o=e.width,r=e.height;h(this,t),this.bgColor="#abcd",this.ctx=n,this.width=o,this.height=r}return f(t,[{key:"_draw",value:function(t,e){this.ctx.beginPath(),this.ctx.fillStyle=t.fillStyle,this.ctx.strokeStyle=t.strokeStyle,e(),this.ctx.fill(),this.ctx.stroke(),this.ctx.closePath()}},{key:"arc",value:function(t){var e=this;this._draw(t,(function(){e.ctx.arc(t.x,t.y,t.r,0,2*Math.PI)}))}},{key:"rect",value:function(t){var e=this;this._draw(t,(function(){e.ctx.rect(t.x,t.y,t.width,t.height)}))}},{key:"text",value:function(t){this.ctx.beginPath(),this.ctx.fillStyle=t.fillStyle||"red",this.ctx.font=t.font||"30px Arial",this.ctx.fillText(t.text||"",t.x||this.ctx.canvas.width/2-30,t.y||60)}},{key:"clear",value:function(){this.ctx.clearRect(0,0,this.width,this.height),this.ctx.fillStyle=this.bgColor,this.ctx.fillRect(0,0,this.width,this.height)}}]),t}(),A=function(){function t(e){h(this,t),this.env=e}return f(t,[{key:"checkPaddlesFloorCiel",value:function(t){var e=this;t.forEach((function(t){t.y+t.height>e.env.height?(t.dy=0,t.y=e.env.height-t.height):t.y<0&&(t.dy=0,t.y=0)}))}},{key:"checkBallFloorCiel",value:function(t){t.y+t.r>this.env.height?(t.y=this.env.height-(t.r+1),t.dy=-t.dy):t.y-t.r<0&&(t.y=0+(t.r+1),t.dy=-t.dy)}},{key:"_ballPaddleCheckX",value:function(t,e){return e.isLeft?t.x-t.r<e.x+e.width:t.x+t.r>e.x}},{key:"_ballPaddleDyMod",value:function(t,e){var n=e.y+e.height/2;return(t.y-n)/10}},{key:"checkBallPaddle",value:function(t,e){return!!(t.y<e.y+e.height&&t.y>e.y&&this._ballPaddleCheckX(t,e))&&(t.dy=this._ballPaddleDyMod(t,e),t.dx=-t.dx,t.x=t.dx+(e.isLeft?e.width:e.x),!0)}},{key:"checkBallHitWall",value:function(t){return t.x+t.r>this.env.width||t.x-t.r<0}}]),t}(),H=function(t){function e(){var t,n;h(this,e);for(var o=arguments.length,r=new Array(o),l=0;l<o;l++)r[l]=arguments[l];return(n=v(this,(t=w(e)).call.apply(t,[this].concat(r)))).ball=null,n.leftPaddle=null,n.rightPaddle=null,n.physics=null,n.painter=null,n}return k(e,t),f(e,[{key:"setup",value:function(t){var e=t.ctx,n=t.width,o=t.height;this.physics=new A({width:n,height:o}),this.painter=new K({ctx:e,width:n,height:o});var r=n/2,l=o/2,c=new F;c.x=r,c.y=l,c.r=10,c.dx=Math.random()>.5?5:-5,c.dy=0,this.ball=c;var h=new G;h.x=0,h.y=l-80/3,h.width=15,h.height=80,h.isLeft=!0,this.leftPaddle=h;var d=new G;d.x=n-15,d.y=l-80/3,d.width=15,d.height=80,this.rightPaddle=d,this.paint()}},{key:"paint",value:function(){this.painter.clear(),this.painter.arc(this.ball),this.painter.rect(this.leftPaddle),this.painter.rect(this.rightPaddle)}}]),e}(x),W={inject:["ctxProvider"],props:{dimensions:Object,controls:Object,gameOn:Boolean,gameOver:Boolean,score:Number},watch:{gameOn:function(t){var e=this;t?R.cachedRunCallback?R.resume():R.run((function(){var t=R.physics.checkBallPaddle(R.ball,R.leftPaddle),n=R.physics.checkBallPaddle(R.ball,R.rightPaddle);R.physics.checkBallFloorCiel(R.ball),R.physics.checkPaddlesFloorCiel([R.leftPaddle,R.rightPaddle]),R.leftPaddle.updatePosition(),R.rightPaddle.updatePosition(),R.ball.updatePosition(),R.physics.checkBallHitWall(R.ball)?(e.update("gameOver",!0),e.update("gameOn",!1),R.stop(),R.painter.text({text:"GAME OVER ! ! !"})):(t||n)&&(e.update("score",e.score+1),e.score>0&&e.score%5==0&&(R.ball.dx>0?R.ball.dx+=1:R.ball.dx-=1)),R.paint()})):R.stop()},controls:{deep:!0,handler:function(t){var e=t.arrowUp,n=t.arrowDown,o=t.w,s=t.s,p=t.p,r=t.r;p&&(R.stop(),this.update("gameOn",!1)),r&&(this.gameOver?this.$emit("reset"):(R.resume(),this.update("gameOn",!0))),R.rightPaddle.dy=e&&!n?-4:n&&!e?4:0,R.leftPaddle.dy=o&&!s?-4:!o&&s?4:0}}},mounted:function(){R=new H,this.setup()},methods:{update:function(t,e){this.$emit("update:".concat(t),e)},setup:function(){R.setup({ctx:this.ctxProvider.ctx,width:this.dimensions.width,height:this.dimensions.height})}},render:function(){}},X={inject:["breakpoint"],components:{GameCanvas:B,Pong:Object(l.a)(W,void 0,void 0,!1,null,null,null).exports},props:{controls:Object},mounted:function(){console.log("just mounted pong")},beforeDestroy:function(){console.log("about to destroy pong")},data:function(){return{gameState:{gameOn:!1,gameOver:!1,score:0}}},computed:{gameStateControlText:function(){return this.gameState.gameOn?"Pause":this.gameState.gameOver?"Reset":"Start"},gameStateClass:function(){return this.gameState.gameOn?"primary":this.gameState.gameOver?"error":"success"}},methods:{reset:function(){this.$refs.pong.setup(),this.gameState.gameOn=!1,this.gameState.gameOver=!1,this.gameState.score=0},onGameStateControlClick:function(){this.gameState.gameOver?this.$refs.pong.reset():this.gameState.gameOn=!this.gameState.gameOn}}},I=Object(l.a)(X,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("j-row",{staticClass:"justify-center"},[n("j-col",{staticClass:"d-flex flex-column align-center"},[n("section",{staticClass:"toolbar dense flat"},[n("div",{staticClass:"toolbar-actions"},[n("button",{staticClass:"btn primary small",class:t.gameStateClass,on:{click:t.onGameStateControlClick}},[t._v("\n          "+t._s(t.gameStateControlText)+"\n        ")]),t._v(" "),n("span",[t._v("Score: "+t._s(t.gameState.score))])])]),t._v(" "),n("game-canvas",{scopedSlots:t._u([{key:"default",fn:function(e){var o=e.hasCtx,r=e.dimensions;return[o?n("Pong",t._b({ref:"pong",attrs:{dimensions:r,controls:t.controls},on:{reset:t.reset}},"Pong",t.gameState,!1,!0)):t._e()]}}])})],1)],1)}),[],!1,null,null,null).exports,N={37:"arrowLeft",38:"arrowUp",39:"arrowRight",40:"arrowDown",65:"a",87:"w",68:"d",83:"s",80:"p",82:"r"},J={middleware:function(t){t.store.commit("SET_BREADCRUMBS",[{to:"/",text:"Home"},{to:"/games",text:"Games"},{to:"/games/".concat(t.params.game),text:t.params.game[0].toUpperCase()+t.params.game.slice(1).toLowerCase()}])},data:function(){return{showModal:!0,games:{snake:U,pong:I},controls:{arrowLeft:!1,arrowUp:!1,arrowRight:!1,arrowDown:!1,a:!1,w:!1,d:!1,s:!1,p:!1,r:!1}}},computed:{selectedGame:function(){return{component:this.games[this.$route.params.game],name:this.$route.params.game}}},methods:{handleKeyDown:function(t){this.controls[N[t.keyCode]]=!0},handleKeyUp:function(t){this.controls[N[t.keyCode]]=!1},onMobileControlDown:function(t){"left"===t?this.controls.arrowLeft=!0:"up"===t?this.controls.arrowUp=!0:"right"===t?this.controls.arrowRight=!0:"down"===t&&(this.controls.arrowDown=!0)},onMobileControlUp:function(t){"left"===t?this.controls.arrowLeft=!1:"up"===t?this.controls.arrowUp=!1:"right"===t?this.controls.arrowRight=!1:"down"===t&&(this.controls.arrowDown=!1)}},mounted:function(){document.addEventListener("keydown",this.handleKeyDown),document.addEventListener("keyup",this.handleKeyUp)},beforeRouteLeave:function(t,e,n){document.removeEventListener("keydown",this.handleKeyDown),document.removeEventListener("keyup",this.handleKeyUp),this.$refs[this.selectedGame.name].reset(),n()}},Y=(n(200),Object(l.a)(J,(function(){var t=this.$createElement,e=this._self._c||t;return e("j-row",[e("j-col",{staticClass:"d-flex flex-column align-center"},[e(this.selectedGame.component,{ref:this.selectedGame.name,tag:"component",attrs:{controls:this.controls},on:{mobileControlDown:this.onMobileControlDown,mobileControlUp:this.onMobileControlUp}})],1)],1)}),[],!1,null,"d22d48e6",null));e.default=Y.exports}}]);