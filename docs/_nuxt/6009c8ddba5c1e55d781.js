(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{193:function(t,e,n){var content=n(200);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(17).default)("a9282396",content,!0,{sourceMap:!1})},194:function(t,e,n){var content=n(202);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(17).default)("78780a25",content,!0,{sourceMap:!1})},195:function(t,e,n){var content=n(204);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(17).default)("cd1a983c",content,!0,{sourceMap:!1})},197:function(t,e,n){var o=n(7);o(o.P,"Array",{fill:n(198)}),n(79)("fill")},198:function(t,e,n){"use strict";var o=n(32),r=n(115),l=n(26);t.exports=function(t){for(var e=o(this),n=l(e.length),c=arguments.length,h=r(c>1?arguments[1]:void 0,n),d=c>2?arguments[2]:void 0,f=void 0===d?n:r(d,n);f>h;)e[h++]=t;return e}},199:function(t,e,n){"use strict";var o=n(193);n.n(o).a},200:function(t,e,n){(t.exports=n(16)(!1)).push([t.i,".modal[data-v-cacbaa74]{position:absolute;top:0;left:0;height:100%;width:100%;background:#fff}",""])},201:function(t,e,n){"use strict";var o=n(194);n.n(o).a},202:function(t,e,n){(t.exports=n(16)(!1)).push([t.i,".toolbar{margin:0;height:5rem;width:100%;border:1px solid transparent;border-radius:2px;box-shadow:1px 1px 2px #aaa}.toolbar.dense{height:3rem}.toolbar.flat{box-shadow:none}.toolbar.outlined{box-shadow:none;border:1px solid #ccc}.toolbar .toolbar-title{font-size:1.25rem;font-weight:700;padding-right:1rem}.toolbar .toolbar-actions{display:flex;height:100%;align-items:center;justify-content:space-between}",""])},203:function(t,e,n){"use strict";var o=n(195);n.n(o).a},204:function(t,e,n){(t.exports=n(16)(!1)).push([t.i,".modal[data-v-2ebcc07f]{position:absolute;top:0;left:0;height:100%;width:100%;background:rgba(51,51,51,.66667)}.modal-content[data-v-2ebcc07f]{position:relative;top:-20%;background:#fff}",""])},207:function(t,e,n){"use strict";n.r(e);n(62);var o={data:function(){return{ctxProvider:{ctx:null}}},inject:["windowSize","breakpoint"],provide:function(){return{ctxProvider:this.ctxProvider}},mounted:function(){this.ctxProvider.ctx=this.$refs.gameCanvas.getContext("2d")},computed:{hasCtx:function(){return!!this.ctxProvider.ctx},dimensions:function(){var t={width:0,height:0,nCols:0,nRows:0};return this.breakpoint.isMobile?(t.width=288,t.height=360,t.nCols=32,t.nRows=40):this.breakpoint.isTablet?(t.width=720,t.height=480,t.nCols=60,t.nRows=40):(t.width=900,t.height=600,t.nCols=60,t.nRows=40),t},snakeOptions:function(){var t={col:0,row:0};return this.breakpoint.isMobile?(t.col=14,t.row=9):this.breakpoint.isTablet?(t.col=20,t.row=13):(t.col=29,t.row=19),t}}},r=n(2),l=Object(r.a)(o,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("canvas",{ref:"gameCanvas",attrs:{height:this.dimensions.height,width:this.dimensions.width}}),this._v(" "),this._t("default",null,null,{hasCtx:this.hasCtx,dimensions:this.dimensions,snakeOptions:this.snakeOptions})],2)}),[],!1,null,null,null).exports,c=(n(78),n(63),n(27),n(18),n(12),n(33),n(30));function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function d(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function f(t,e,n){return e&&d(t.prototype,e),n&&d(t,n),t}var m=n(15);function v(t,e){return!e||"object"!==Object(m.a)(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function w(t){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function y(t,p){return(y=Object.setPrototypeOf||function(t,p){return t.__proto__=p,t})(t,p)}function k(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&y(t,e)}var x=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;h(this,t),this.listeners={},this.animationFrameHandle=null,this.cachedRunCallback=null,this._running=!1,this.animationRate=e}return f(t,[{key:"stop",value:function(){this._running=!1,cancelAnimationFrame(this.animationFrameHandle)}},{key:"resume",value:function(){return!(this._running||!this.cachedRunCallback)&&(this.run(this.cachedRunCallback),!0)}},{key:"run",value:function(t){var e,n=this;if(this._running=!0,this.cachedRunCallback||(this.cachedRunCallback=t.bind(this)),this.animationRate){var o=this.animationRate;e=function(){0===(o-=1)&&(t(),o=n.animationRate),n.animationFrameHandle=requestAnimationFrame(e)}}else e=function(){t(),n.animationFrameHandle=requestAnimationFrame(e)};e()}}]),t}(),S=function(){function t(e){var n=e.x,o=e.y,r=e.width,l=e.height;h(this,t),this.kind=1,this.x=n,this.y=o,this.width=r,this.height=l}return f(t,[{key:"color",get:function(){switch(this.kind){case 1:return"#abcd";case 2:return{strokeStyle:"lime",fillStyle:"#a29"};case 3:return{fillStyle:"#17b",strokeStyle:"#333"}}}}]),t}();var C=function t(e){var n=e.nRows,o=e.nCols,r=e.width,l=e.height;h(this,t),this.cells=function(t,e,n,o){for(var r=[],l=Math.floor(n/e),c=Math.floor(o/t),h=0;h<t;h++){for(var d=c*h,f=[],col=0;col<e;col++)f.push(new S({x:l*col,y:d,width:l,height:c}));r.push(f)}return r}(n,o,r,l)},O=(n(197),function(){function t(e){h(this,t),this.ctx=e}return f(t,[{key:"paintCell",value:function(t){this.ctx.beginPath(),this.ctx.rect(t.x,t.y,t.width,t.height),"string"==typeof t.color?(this.ctx.fillStyle=t.color,this.ctx.fill()):(this.ctx.fillStyle=t.color.fillStyle,this.ctx.strokeStyle=t.color.strokeStyle,this.ctx.stroke(),this.ctx.fill()),this.ctx.closePath()}},{key:"paintText",value:function(t){var text=t.text,e=t.font,n=t.fillStyle,o=t.x,r=t.y;this.ctx.fillStyle=n,this.ctx.font=e,this.ctx.fillText(text,o,r)}}]),t}()),_=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.row,col=e.col,o=e.gameMode;h(this,t),this.changeDirectionLock=!1,this.nSegmentsToPush=0,this.dx=1,this.dy=0,this.didCollideWithSelf=!1,this.gameMode=o,this.headCol=col,this.headRow=n,this.body=[{row:n,col:col}],this.bodyMap={},this.bodyMap["".concat(n,",").concat(col)]=!0}return f(t,[{key:"isSnake",value:function(t,e){return this.bodyMap["".concat(t,",").concat(e)]}},{key:"setDirection",value:function(t){var e=this,n=function(t,n){e.dx!==-t&&(e.dx=t),e.dy!==-n&&(e.dy=n),e.changeDirectionLock=!0},o={arrowLeft:function(){return n(-1,0)},arrowUp:function(){return n(0,-1)},arrowRight:function(){return n(1,0)},arrowDown:function(){return n(0,1)}};!this.changeDirectionLock&&o[t]&&o[t]()}},{key:"updateBody",value:function(){var t=this;if(this.bodyMap={},this.nSegmentsToPush>0){var e=this.body[this.body.length-1],n=e.row,col=e.col;this.body.push({row:n,col:col}),this.nSegmentsToPush-=1}else if("classic"===this.gameMode)for(var i=0;i<this.body.length-1;i++){var o=this.body[i+1],r=o.row,l=o.col;this.body[i]={row:r,col:l}}this.headCol+=this.dx,this.headRow+=this.dy,this.body[this.body.length-1]={col:this.headCol,row:this.headRow},this.body.forEach((function(e){var n=e.row,col=e.col;t.bodyMap["".concat(n,",").concat(col)]&&(t.didCollideWithSelf=!0),t.bodyMap["".concat(n,",").concat(col)]=!0})),this.changeDirectionLock=!1}}]),t}();function j(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function P(t,e){return Math.floor(Math.random()*(e-t)+t)}var M,R,D=function(t){function e(){var t,n;h(this,e);for(var o=arguments.length,r=new Array(o),l=0;l<o;l++)r[l]=arguments[l];return(n=v(this,(t=w(e)).call.apply(t,[this].concat(r)))).score=0,n.food={row:null,col:null},n.width=0,n.height=0,n.nRows=null,n.nCols=null,n.snake=null,n.cellMap=null,n.painter=null,n}return k(e,t),f(e,[{key:"setup",value:function(t){var e=t.ctx,n=t.animationRate,o=t.dimensions,r=t.snakeOptions,l=t.gameMode,h=t.paintScore;this.score=0,this.width=o.width,this.height=o.height,this.nRows=o.nRows,this.nCols=o.nCols,this.cellMap=new C(o),this.painter=new O(e),this.snake=new _(function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?j(source,!0).forEach((function(e){Object(c.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):j(source).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},r,{gameMode:l})),this.animationRate=n,this.generateFood(),this.paintCells(),h&&this.paintScore()}},{key:"resize",value:function(t,e,n,o){this.width=t,this.height=e,this.nRows=n,this.nCols=o,this.cellMap=new C({nRows:n,nCols:o,width:t,height:e}),this.paintCells()}},{key:"getCellKind",value:function(t,col){return this.snake.bodyMap["".concat(t,",").concat(col)]?2:this.food.row===t&&this.food.col===col?3:1}},{key:"paintCells",value:function(){var t=this;this.painter.ctx.clearRect(0,0,this.painter.ctx.canvas.width,this.painter.ctx.canvas.height),this.cellMap.cells.forEach((function(e,n){e.forEach((function(e,o){e.kind=t.getCellKind(n,o),t.painter.paintCell(e)}))}))}},{key:"generateFood",value:function(){var col=P(0,this.nCols),t=P(0,this.nRows);if(this.snake.bodyMap["".concat(t,",").concat(col)])return this.generateFood();this.food.col=col,this.food.row=t}},{key:"snakeDidEatFood",value:function(){return this.snake.headRow===this.food.row&&this.snake.headCol===this.food.col}},{key:"gameIsOver",value:function(){var t=this.snake,e=t.headCol,n=t.headRow;return e<0||e>=this.nCols||n<0||n>=this.nRows||this.snake.didCollideWithSelf}},{key:"paintScore",value:function(){this.painter.paintText({text:this.score,fillStyle:"black",font:"20px Arial",x:this.width-25,y:30})}},{key:"paintGameOver",value:function(){this.painter.paintText({text:"GAME OVER ! ! !",fillStyle:"red",font:"25px Arial",x:this.width/2-80,y:60})}}]),e}(x),$={inject:["ctxProvider","windowSize"],props:{dimensions:Object,controls:Object,snakeOptions:Object,gameMode:String,showScore:Boolean,animationRate:Number,gameOn:Boolean,gameOver:Boolean,score:Number},watch:{gameOn:function(t){var e=this;t?M.cachedRunCallback?M.resume():M.run((function(){if(M.snake.updateBody(),M.gameIsOver())return M.stop(),M.paintGameOver(),e.update("gameOn",!1),void e.update("gameOver",!0);M.snakeDidEatFood()&&(e.update("score",e.score+1),M.score+=1,M.generateFood(),M.snake.nSegmentsToPush+=6),M.paintCells(),e.showScore&&M.paintScore()})):M.stop()},showScore:function(t){t?M.paintScore():M.paintCells()},controls:{deep:!0,handler:function(t){var e=t.arrowLeft,n=t.arrowUp,o=t.arrowRight,r=t.arrowDown,p=t.p,l=t.r;p&&(M.stop(),this.update("gameOn",!1)),l&&(this.gameOver?this.$emit("reset"):(M.resume(),this.update("gameOn",!0))),e&&M.snake.setDirection("arrowLeft"),n&&M.snake.setDirection("arrowUp"),o&&M.snake.setDirection("arrowRight"),r&&M.snake.setDirection("arrowDown")}},animationRate:function(t){M.animationRate=t},gameMode:function(t){M.snake.gameMode=t},dimensions:{deep:!0,handler:function(t,e){t.width===e.width&&t.height===e.height||M.resize(t.width,t.height,t.nRows,t.nCols)}}},mounted:function(){M=new D,this.setup()},methods:{update:function(t,e){this.$emit("update:".concat(t),e)},setup:function(){M.setup({ctx:this.ctxProvider.ctx,dimensions:this.dimensions,snakeOptions:this.snakeOptions,animationRate:this.animationRate,gameMode:this.gameMode,paintScore:this.showScore})}},render:function(t){console.log("hey we reneder")}},E=Object(r.a)($,void 0,void 0,!1,null,null,null).exports,L={props:{value:Boolean,gameMode:String,snakeSpeed:Object,showScore:Boolean}},U=(n(199),Object(r.a)(L,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.value?n("section",{staticClass:"modal"},[n("j-container",{staticClass:"flex fullheight"},[n("j-row",[n("j-col",{staticClass:"d-flex flex-column align-start"},[n("j-checkbox",{attrs:{id:"show-score-checkbox-mobile",label:"Show Score",value:t.showScore},on:{change:function(e){return t.$emit("update:showScore",e)}}}),t._v(" "),n("j-slider",{ref:"slider",attrs:{id:"speed-slider-mobile",label:"Speed: "+t.snakeSpeed.value,step:"1",tickmarks:"",min:t.snakeSpeed.min,max:t.snakeSpeed.max,value:t.snakeSpeed.value},on:{input:function(e){return t.$emit("update:snakeSpeed",e)}}}),t._v(" "),n("j-select",{attrs:{blur:"",label:"Game Mode",options:["classic","polluter"],value:t.gameMode},on:{input:function(e){return t.$emit("update:gameMode",e)}},scopedSlots:t._u([{key:"option",fn:function(e){var n=e.value;return[t._v("\n            "+t._s(n[0].toUpperCase()+n.slice(1))+"\n          ")]}}],null,!1,2234790531)})],1)],1),t._v(" "),n("j-row",[n("j-col")],1),t._v(" "),n("j-row",{staticClass:"align-end"},[n("j-col",[n("button",{staticClass:"btn primary block",on:{touchstart:function(e){return t.$listeners.input(!t.value)}}},[t._v("Close")])])],1)],1)],1):t._e()}),[],!1,null,"cacbaa74",null).exports),T={inject:["breakpoint"],props:{controls:Object},components:{GameCanvas:l,Snake:E,MobileSettings:U},data:function(){return{showSettings:!1,snakeSpeed:{value:4,min:1,max:7},gameState:{gameOn:!1,gameOver:!1,score:0},gameMode:"classic",showScore:!1}},mounted:function(){this.breakpoint.isMobile&&(this.snakeSpeed.value=2),this.loadSettings(),window.addEventListener("beforeunload",this.saveSettings)},beforeDestroy:function(){window.removeEventListener("beforeunload",this.saveSettings)},computed:{animationRate:function(){switch(this.snakeSpeed.value){case 1:return 8;case 2:return 7;case 3:return 6;case 4:return 5;case 5:return 4;case 6:return 3;case 7:return 2}},gameStateControlText:function(){return this.gameState.gameOn?"Pause":this.gameState.gameOver?"Reset":"Start"},gameStateClass:function(){return this.gameState.gameOn?"light":this.gameState.gameOver?"error":"success"}},methods:{loadSettings:function(){var t=localStorage.getItem("snake");t&&(t=JSON.parse(t),this.showScore=t.showScore,this.gameMode=t.gameMode,this.snakeSpeed.value=t.snakeSpeed.value)},saveSettings:function(){localStorage.setItem("snake",JSON.stringify({showScore:this.showScore,gameMode:this.gameMode,snakeSpeed:this.snakeSpeed}))},reset:function(){this.$refs.snake.setup(),this.gameState.gameOn=!1,this.gameState.gameOver=!1,this.gameState.score=0},onGameStateControlClick:function(){this.gameState.gameOver?this.reset():this.gameState.gameOn=!this.gameState.gameOn},onShowTouchSettings:function(){this.showSettings=!0,this.gameState.gameOn=!1}}},B=(n(201),Object(r.a)(T,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("j-row",{staticClass:"justify-center"},[n("j-col",{staticClass:"d-flex flex-column align-center "},[n("section",{staticClass:"toolbar dense flat hidden-mobile"},[n("div",{staticClass:"toolbar-actions"},[n("j-col",{staticClass:"shrink px-0"},[n("button",{staticClass:"btn small",class:t.gameStateClass,on:{click:t.onGameStateControlClick}},[t._v("\n            "+t._s(t.gameStateControlText)+"\n          ")])]),t._v(" "),n("j-col",{staticClass:"d-flex justify-end align-center px-0"},[n("div",{staticClass:"px-2"},[n("j-checkbox",{attrs:{id:"show-score-checkbox",label:"Show Score"},model:{value:t.showScore,callback:function(e){t.showScore=e},expression:"showScore"}})],1),t._v(" "),n("div",{staticClass:"px-2"},[n("j-slider",{ref:"slider",attrs:{blur:"",id:"speed-slider",label:"Speed: "+t.snakeSpeed.value,step:"1",tickmarks:"",min:t.snakeSpeed.min,max:t.snakeSpeed.max},model:{value:t.snakeSpeed.value,callback:function(e){t.$set(t.snakeSpeed,"value",e)},expression:"snakeSpeed.value"}})],1),t._v(" "),n("div",{staticClass:"pl-2"},[n("j-select",{attrs:{blur:"",label:"Game Mode",options:["classic","polluter"]},scopedSlots:t._u([{key:"option",fn:function(e){var n=e.value;return[t._v("\n                "+t._s(n[0].toUpperCase()+n.slice(1))+"\n              ")]}}]),model:{value:t.gameMode,callback:function(e){t.gameMode=e},expression:"gameMode"}})],1)])],1)]),t._v(" "),n("game-canvas",{scopedSlots:t._u([{key:"default",fn:function(e){var o=e.hasCtx,r=e.dimensions,l=e.snakeOptions;return[o?n("Snake",t._b({ref:"snake",attrs:{dimensions:r,controls:t.controls,gameMode:t.gameMode,showScore:t.showScore,snakeOptions:l,animationRate:t.animationRate},on:{reset:t.reset}},"Snake",t.gameState,!1,!0)):t._e()]}}])}),t._v(" "),n("div",{staticClass:"hidden-above-mobile",attrs:{id:"mobile-controls"}},[n("div",{staticClass:"d-flex justify-between"},[n("div",{staticClass:"shrink d-flex flex-column"},[n("button",{staticClass:"btn small mb-4",class:t.gameStateClass,on:{touchstart:t.onGameStateControlClick}},[t._v("\n            "+t._s(t.gameStateControlText)+"\n          ")]),t._v(" "),n("button",{staticClass:"btn small",on:{touchstart:function(e){t.showSettings=!0,t.gameState.gameOn=!1}}},[t._v("\n            Settings\n          ")])]),t._v(" "),n("j-col",[n("j-row",[n("j-col",{staticClass:"d-flex flex-column align-center"},[n("button",{staticClass:"btn large square",on:{touchstart:function(e){return t.$emit("mobileControlDown","up")},touchend:function(e){return t.$emit("mobileControlUp","up")}}},[t._v("\n                ↑\n              ")])])],1),t._v(" "),n("j-row",[n("j-col",[n("button",{staticClass:"btn large square",on:{touchstart:function(e){return t.$emit("mobileControlDown","left")},touchend:function(e){return t.$emit("mobileControlUp","left")}}},[t._v("\n                ←\n              ")]),t._v(" "),n("button",{staticClass:"btn large square",on:{touchstart:function(e){return t.$emit("mobileControlDown","down")},touchend:function(e){return t.$emit("mobileControlUp","down")}}},[t._v("\n                ↓\n              ")]),t._v(" "),n("button",{staticClass:"btn large square",on:{touchstart:function(e){return t.$emit("mobileControlDown","right")},touchend:function(e){return t.$emit("mobileControlUp","right")}}},[t._v("\n                →\n              ")])])],1)],1)],1)]),t._v(" "),n("MobileSettings",{attrs:{gameMode:t.gameMode,showScore:t.showScore,snakeSpeed:t.snakeSpeed},on:{"update:gameMode":function(e){t.gameMode=e},"update:game-mode":function(e){t.gameMode=e},"update:showScore":function(e){t.showScore=e},"update:show-score":function(e){t.showScore=e},"update:snakeSpeed":function(e){t.snakeSpeed.value=e}},model:{value:t.showSettings,callback:function(e){t.showSettings=e},expression:"showSettings"}})],1)],1)}),[],!1,null,null,null).exports),G=function(){function t(){h(this,t),this.fillStyle="#17b",this.strokeStyle="#333",this.x=0,this.y=0,this.r=0,this.dx=0,this.dy=0}return f(t,[{key:"updatePosition",value:function(){this.x+=this.dx,this.y+=this.dy}}]),t}(),F=function(){function t(){h(this,t),this.fillStyle="#a29",this.strokeStyle="lime",this.x=0,this.y=0,this.width=0,this.height=0,this.dx=0,this.dy=0,this.isLeft=!1}return f(t,[{key:"updatePosition",value:function(){this.y+=this.dy}}]),t}(),A=function(){function t(e){var n=e.ctx,o=e.width,r=e.height;h(this,t),this.bgColor="#abcd",this.ctx=n,this.width=o,this.height=r}return f(t,[{key:"_draw",value:function(t,e){this.ctx.beginPath(),this.ctx.fillStyle=t.fillStyle,this.ctx.strokeStyle=t.strokeStyle,e(),this.ctx.fill(),this.ctx.stroke(),this.ctx.closePath()}},{key:"arc",value:function(t){var e=this;this._draw(t,(function(){e.ctx.arc(t.x,t.y,t.r,0,2*Math.PI)}))}},{key:"rect",value:function(t){var e=this;this._draw(t,(function(){e.ctx.rect(t.x,t.y,t.width,t.height)}))}},{key:"text",value:function(t){this.ctx.beginPath(),this.ctx.fillStyle=t.fillStyle||"red",this.ctx.font=t.font||"30px Arial",this.ctx.fillText(t.text||"",t.x||this.ctx.canvas.width/2-30,t.y||60)}},{key:"clear",value:function(){this.ctx.clearRect(0,0,this.width,this.height),this.ctx.fillStyle=this.bgColor,this.ctx.fillRect(0,0,this.width,this.height)}}]),t}(),K=function(){function t(e){h(this,t),this.env=e}return f(t,[{key:"checkPaddlesFloorCiel",value:function(t){var e=this;t.forEach((function(t){t.y+t.height>e.env.height?(t.dy=0,t.y=e.env.height-t.height):t.y<0&&(t.dy=0,t.y=0)}))}},{key:"checkBallFloorCiel",value:function(t){t.y+t.r>this.env.height?(t.y=this.env.height-(t.r+1),t.dy=-t.dy):t.y-t.r<0&&(t.y=0+(t.r+1),t.dy=-t.dy)}},{key:"_ballPaddleCheckX",value:function(t,e){return e.isLeft?t.x-t.r<e.x+e.width:t.x+t.r>e.x}},{key:"_ballPaddleDyMod",value:function(t,e){var n=e.y+e.height/2;return(t.y-n)/10}},{key:"checkBallPaddle",value:function(t,e){return!!(t.y<e.y+e.height&&t.y>e.y&&this._ballPaddleCheckX(t,e))&&(t.dy=this._ballPaddleDyMod(t,e),t.dx=-t.dx,t.x=t.dx+(e.isLeft?e.width:e.x),!0)}},{key:"checkBallHitWall",value:function(t){return t.x+t.r>this.env.width||t.x-t.r<0}}]),t}(),H=function(t){function e(){var t,n;h(this,e);for(var o=arguments.length,r=new Array(o),l=0;l<o;l++)r[l]=arguments[l];return(n=v(this,(t=w(e)).call.apply(t,[this].concat(r)))).ball=null,n.leftPaddle=null,n.rightPaddle=null,n.physics=null,n.painter=null,n}return k(e,t),f(e,[{key:"setup",value:function(t){var e=t.ctx,n=t.width,o=t.height;this.physics=new K({width:n,height:o}),this.painter=new A({ctx:e,width:n,height:o});var r=n/2,l=o/2,c=new G;c.x=r,c.y=l,c.r=10,c.dx=Math.random()>.5?5:-5,c.dy=0,this.ball=c;var h=new F;h.x=0,h.y=l-80/3,h.width=15,h.height=80,h.isLeft=!0,this.leftPaddle=h;var d=new F;d.x=n-15,d.y=l-80/3,d.width=15,d.height=80,this.rightPaddle=d,this.paint()}},{key:"paint",value:function(){this.painter.clear(),this.painter.arc(this.ball),this.painter.rect(this.leftPaddle),this.painter.rect(this.rightPaddle)}}]),e}(x),z={inject:["ctxProvider"],props:{dimensions:Object,controls:Object,gameOn:Boolean,gameOver:Boolean,score:Number},watch:{gameOn:function(t){var e=this;t?R.cachedRunCallback?R.resume():R.run((function(){var t=R.physics.checkBallPaddle(R.ball,R.leftPaddle),n=R.physics.checkBallPaddle(R.ball,R.rightPaddle);R.physics.checkBallFloorCiel(R.ball),R.physics.checkPaddlesFloorCiel([R.leftPaddle,R.rightPaddle]),R.leftPaddle.updatePosition(),R.rightPaddle.updatePosition(),R.ball.updatePosition(),R.physics.checkBallHitWall(R.ball)?(e.update("gameOver",!0),e.update("gameOn",!1),R.stop(),R.painter.text({text:"GAME OVER ! ! !"})):(t||n)&&(e.update("score",e.score+1),e.score>0&&e.score%5==0&&(R.ball.dx>0?R.ball.dx+=1:R.ball.dx-=1)),R.paint()})):R.stop()},controls:{deep:!0,handler:function(t){var e=t.arrowUp,n=t.arrowDown,o=t.w,s=t.s,p=t.p,r=t.r;p&&(R.stop(),this.update("gameOn",!1)),r&&(this.gameOver?this.$emit("reset"):(R.resume(),this.update("gameOn",!0))),R.rightPaddle.dy=e&&!n?-4:n&&!e?4:0,R.leftPaddle.dy=o&&!s?-4:!o&&s?4:0}}},mounted:function(){R=new H,this.setup()},methods:{update:function(t,e){this.$emit("update:".concat(t),e)},setup:function(){R.setup({ctx:this.ctxProvider.ctx,width:this.dimensions.width,height:this.dimensions.height})}},render:function(){}},I={inject:["breakpoint"],components:{GameCanvas:l,Pong:Object(r.a)(z,void 0,void 0,!1,null,null,null).exports},props:{controls:Object},mounted:function(){console.log("just mounted pong")},beforeDestroy:function(){console.log("about to destroy pong")},data:function(){return{gameState:{gameOn:!1,gameOver:!1,score:0}}},computed:{gameStateControlText:function(){return this.gameState.gameOn?"Pause":this.gameState.gameOver?"Reset":"Start"}},methods:{reset:function(){this.$refs.pong.setup(),this.gameState.gameOn=!1,this.gameState.gameOver=!1,this.gameState.score=0},onGameStateControlClick:function(){this.gameState.gameOver?this.$refs.pong.reset():this.gameState.gameOn=!this.gameState.gameOn}}},N=Object(r.a)(I,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"columns is-centered is-vcentered"},[n("div",{staticClass:"is-hidden-desktop column is-narrow"},[t._v("\n      Sorry, my version of Pong doesn't work on your phone/tablet yet. You can play it on a laptop or desktop though!\n    ")]),t._v(" "),n("div",{staticClass:"is-hidden-touch column is-narrow"},[n("div",{staticClass:"columns level"},[n("div",{staticClass:"column"},[n("b-button",{on:{click:t.onGameStateControlClick}},[t._v(t._s(t.gameStateControlText))])],1),t._v(" "),n("div",{staticClass:"column is-narrow"},[n("span",[t._v("Score: "+t._s(t.gameState.score))])])]),t._v(" "),n("game-canvas",{scopedSlots:t._u([{key:"default",fn:function(e){var o=e.hasCtx,r=e.dimensions;return[o?n("Pong",t._b({ref:"pong",attrs:{dimensions:r,controls:t.controls},on:{reset:t.reset}},"Pong",t.gameState,!1,!0)):t._e()]}}])})],1)])])}),[],!1,null,null,null).exports,W={37:"arrowLeft",38:"arrowUp",39:"arrowRight",40:"arrowDown",65:"a",87:"w",68:"d",83:"s",80:"p",82:"r"},J={middleware:function(t){t.store.commit("SET_BREADCRUMBS",[{to:"/",text:"Home"},{to:"/games",text:"Games"},{to:"/games/".concat(t.params.game),text:t.params.game[0].toUpperCase()+t.params.game.slice(1).toLowerCase()}])},data:function(){return{showModal:!0,games:{snake:B,pong:N},controls:{arrowLeft:!1,arrowUp:!1,arrowRight:!1,arrowDown:!1,a:!1,w:!1,d:!1,s:!1,p:!1,r:!1}}},computed:{selectedGame:function(){return{component:this.games[this.$route.params.game],name:this.$route.params.game}}},methods:{handleKeyDown:function(t){this.controls[W[t.keyCode]]=!0},handleKeyUp:function(t){this.controls[W[t.keyCode]]=!1},onMobileControlDown:function(t){"left"===t?this.controls.arrowLeft=!0:"up"===t?this.controls.arrowUp=!0:"right"===t?this.controls.arrowRight=!0:"down"===t&&(this.controls.arrowDown=!0)},onMobileControlUp:function(t){"left"===t?this.controls.arrowLeft=!1:"up"===t?this.controls.arrowUp=!1:"right"===t?this.controls.arrowRight=!1:"down"===t&&(this.controls.arrowDown=!1)}},mounted:function(){document.addEventListener("keydown",this.handleKeyDown),document.addEventListener("keyup",this.handleKeyUp)},beforeRouteLeave:function(t,e,n){document.removeEventListener("keydown",this.handleKeyDown),document.removeEventListener("keyup",this.handleKeyUp),this.$refs[this.selectedGame.name].reset(),n()}},V=(n(203),Object(r.a)(J,(function(){var t=this.$createElement,e=this._self._c||t;return e("j-row",[e("j-col",{staticClass:"d-flex flex-column align-center"},[e(this.selectedGame.component,{ref:this.selectedGame.name,tag:"component",attrs:{controls:this.controls},on:{mobileControlDown:this.onMobileControlDown,mobileControlUp:this.onMobileControlUp}})],1)],1)}),[],!1,null,"2ebcc07f",null));e.default=V.exports}}]);